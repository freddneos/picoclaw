{{define "dashboard-content"}}
<div class="header">
    <h1>üìä Dashboard</h1>
    <div class="status">
        <span class="status-dot"></span>
        <span>System Running</span>
    </div>
</div>

<div class="grid">
    <!-- System Info -->
    <div class="card">
        <h2>üñ•Ô∏è System Info</h2>
        <div style="padding: 10px 0;">
            <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #ecf0f1;">
                <strong>Version:</strong>
                <span>{{.Version}}</span>
            </div>
            <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #ecf0f1;">
                <strong>Status:</strong>
                <span style="color: #27ae60;">‚óè</span> {{.Uptime}}
            </div>
            <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #ecf0f1;">
                <strong>LLM Model:</strong>
                <span>{{.Config.Agents.Defaults.Model}}</span>
            </div>
            <div style="display: flex; justify-content: space-between; padding: 8px 0;">
                <strong>Max Tokens:</strong>
                <span>{{.Config.Agents.Defaults.MaxTokens}}</span>
            </div>
        </div>
    </div>

    <!-- Active Channels -->
    <div class="card">
        <h2>üîå Active Channels</h2>
        <div style="padding: 10px 0;">
            <p style="font-size: 24px; font-weight: bold; color: #3498db; margin-bottom: 15px;">
                {{.EnabledCount}} / 5 Enabled
            </p>
            <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                {{if .Config.Channels.WhatsApp.Enabled}}
                <span style="background: #25D366; color: white; padding: 6px 12px; border-radius: 4px; font-size: 13px;">
                    ‚úì WhatsApp
                </span>
                {{else}}
                <span style="background: #ecf0f1; color: #95a5a6; padding: 6px 12px; border-radius: 4px; font-size: 13px;">
                    WhatsApp
                </span>
                {{end}}

                {{if .Config.Channels.Telegram.Enabled}}
                <span style="background: #0088cc; color: white; padding: 6px 12px; border-radius: 4px; font-size: 13px;">
                    ‚úì Telegram
                </span>
                {{else}}
                <span style="background: #ecf0f1; color: #95a5a6; padding: 6px 12px; border-radius: 4px; font-size: 13px;">
                    Telegram
                </span>
                {{end}}

                {{if .Config.Channels.Discord.Enabled}}
                <span style="background: #5865F2; color: white; padding: 6px 12px; border-radius: 4px; font-size: 13px;">
                    ‚úì Discord
                </span>
                {{else}}
                <span style="background: #ecf0f1; color: #95a5a6; padding: 6px 12px; border-radius: 4px; font-size: 13px;">
                    Discord
                </span>
                {{end}}

                {{if .Config.Channels.Slack.Enabled}}
                <span style="background: #4A154B; color: white; padding: 6px 12px; border-radius: 4px; font-size: 13px;">
                    ‚úì Slack
                </span>
                {{else}}
                <span style="background: #ecf0f1; color: #95a5a6; padding: 6px 12px; border-radius: 4px; font-size: 13px;">
                    Slack
                </span>
                {{end}}

                {{if .Config.Channels.Feishu.Enabled}}
                <span style="background: #00B96B; color: white; padding: 6px 12px; border-radius: 4px; font-size: 13px;">
                    ‚úì Feishu
                </span>
                {{else}}
                <span style="background: #ecf0f1; color: #95a5a6; padding: 6px 12px; border-radius: 4px; font-size: 13px;">
                    Feishu
                </span>
                {{end}}
            </div>
        </div>
        <div style="margin-top: 15px;">
            <a href="/channels" class="btn btn-primary" style="width: 100%;">Configure Channels</a>
        </div>
    </div>

    <!-- Agent Configuration -->
    <div class="card">
        <h2>ü§ñ Agent Config</h2>
        <div style="padding: 10px 0;">
            <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #ecf0f1;">
                <strong>Max Tool Iterations:</strong>
                <span>{{.Config.Agents.Defaults.MaxToolIterations}}</span>
            </div>
            <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #ecf0f1;">
                <strong>Model:</strong>
                <span>{{.Config.Agents.Defaults.Model}}</span>
            </div>
            <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #ecf0f1;">
                <strong>Provider:</strong>
                <span>{{.Config.Agents.Defaults.Provider}}</span>
            </div>
            <div style="display: flex; justify-content: space-between; padding: 8px 0;">
                <strong>Max Tokens:</strong>
                <span>{{.Config.Agents.Defaults.MaxTokens}}</span>
            </div>
        </div>
        <div style="margin-top: 15px;">
            <a href="/settings" class="btn btn-primary" style="width: 100%;">Edit Settings</a>
        </div>
    </div>
</div>

<!-- Quick Actions -->
<div class="card">
    <h2>‚ö° Quick Actions</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; padding: 10px 0;">
        <a href="/channels" class="btn btn-primary" style="padding: 20px; text-align: center; text-decoration: none;">
            <div style="font-size: 32px; margin-bottom: 10px;">üîå</div>
            <div>Manage Channels</div>
        </a>
        <a href="/chat" class="btn btn-success" style="padding: 20px; text-align: center; text-decoration: none;">
            <div style="font-size: 32px; margin-bottom: 10px;">üí¨</div>
            <div>Open Chat</div>
        </a>
        <a href="/skills" class="btn btn-primary" style="padding: 20px; text-align: center; text-decoration: none;">
            <div style="font-size: 32px; margin-bottom: 10px;">üé®</div>
            <div>Install Skills</div>
        </a>
        <a href="/logs" class="btn btn-secondary" style="padding: 20px; text-align: center; text-decoration: none;">
            <div style="font-size: 32px; margin-bottom: 10px;">üìù</div>
            <div>View Logs</div>
        </a>
    </div>
</div>

<!-- Recent Activity -->
<div class="card">
    <h2>üìã Recent Activity</h2>
    <div style="max-height: 300px; overflow-y: auto;">
        {{if .LogEntries}}
        <table style="width: 100%; border-collapse: collapse;">
            <thead>
                <tr style="background: #ecf0f1;">
                    <th style="padding: 10px; text-align: left;">Time</th>
                    <th style="padding: 10px; text-align: left;">Level</th>
                    <th style="padding: 10px; text-align: left;">Component</th>
                    <th style="padding: 10px; text-align: left;">Message</th>
                </tr>
            </thead>
            <tbody>
                {{range .LogEntries}}
                <tr style="border-bottom: 1px solid #ecf0f1;">
                    <td style="padding: 8px; font-size: 12px;">{{.Timestamp.Format "15:04:05"}}</td>
                    <td style="padding: 8px;">
                        <span style="padding: 3px 8px; border-radius: 3px; background: #3498db; color: white; font-size: 11px;">{{.Level}}</span>
                    </td>
                    <td style="padding: 8px; font-size: 13px;">{{.Component}}</td>
                    <td style="padding: 8px; font-size: 13px;">{{.Message}}</td>
                </tr>
                {{end}}
            </tbody>
        </table>
        {{else}}
        <p style="color: #95a5a6; text-align: center; padding: 40px;">No recent activity</p>
        {{end}}
    </div>
    <div style="margin-top: 15px;">
        <a href="/logs" class="btn btn-primary">View All Logs</a>
    </div>
</div>

<script>
    // Auto-refresh dashboard every 30 seconds
    setTimeout(() => location.reload(), 30000);
</script>
{{end}}
